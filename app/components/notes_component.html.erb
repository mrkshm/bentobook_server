<div class="<%= @container_classes %>"
     data-controller="notes"
     data-notes-content-value="<%= notes_content %>"
     data-notes-url-value="<%= update_url %>"
     id="<%= component_id %>">
  
  <div class="flex items-center justify-between mb-2">
    <h3 class="text-sm font-medium text-surface-700">Notes</h3>
    <% if has_notes? %>
      <button type="button" 
              data-notes-target="editButton"
              data-action="click->notes#toggleEdit"
              class="text-surface-500 hover:text-surface-700 transition-colors">
        <%= heroicon "pencil", options: { class: "w-4 h-4" } %>
      </button>
    <% end %>
  </div>

  <% if has_notes? %>
    <div data-notes-target="display" class="text-surface-600 whitespace-pre-wrap">
      <%= notes_content %>
    </div>
  <% else %>
    <button type="button"
            data-notes-target="addButton"
            data-action="click->notes#showEditor"
            class="w-full py-2 px-3 text-surface-500 border border-dashed border-surface-300 rounded-md hover:text-surface-700 hover:border-surface-400 transition-colors text-left">
      <%= heroicon "plus", options: { class: "inline w-4 h-4 mr-2" } %>
      Add a note
    </button>
  <% end %>

  <div data-notes-target="editor" class="hidden">
    <textarea data-notes-target="textarea"
              class="w-full px-3 py-2 text-surface-900 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"
              rows="4"
              placeholder="Add your notes here..."><%= notes_content %></textarea>
    
    <div class="flex justify-end space-x-2 mt-2">
      <button type="button"
              data-notes-target="cancelButton"
              data-action="click->notes#cancel"
              class="px-3 py-1 text-sm rounded-md bg-surface-200 text-surface-700 hover:bg-surface-300 transition-colors">
        Cancel
      </button>
      <button type="button"
              data-notes-target="saveButton"
              data-action="click->notes#save"
              class="px-3 py-1 text-sm rounded-md bg-primary-600 text-white hover:bg-primary-700 transition-colors">
        Save
      </button>
    </div>
  </div>
</div>